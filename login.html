<!-- login.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Login - MyApp</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import { createNavbar } from './navbar.js';
    import { createFooter } from './footer.js';
    import { validateLogin, setCurrentUser } from './auth.js';

    const root = document.getElementById('root');
    root.appendChild(createNavbar());

    const main = document.createElement('main');
    main.className = 'container';
    main.innerHTML = `
      <h1>Login</h1>
      <form id="loginForm">
        <label>Email<br /><input name="email" type="email" required></label><br />
        <label>Password<br /><input name="password" type="password" required></label><br />
        <button type="submit">Login</button>
      </form>
      <div id="msg"></div>
    `;
    root.appendChild(main);
    root.appendChild(createFooter());

    const form = main.querySelector('#loginForm');
    const msg = main.querySelector('#msg');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const fd = new FormData(form);
      const email = fd.get('email').trim();
      const password = fd.get('password');

      if (validateLogin(email, password)) {
        setCurrentUser(email);
        window.location.href = 'todos.html';
      } else {
        msg.textContent = 'Invalid credentials.';
        msg.style.color = 'red';
      }
    });
  </script>
</body>
</html>
